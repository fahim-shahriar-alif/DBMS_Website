<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASA Data Server - Dashboard</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/table.css">
    <style>
        .system-architecture {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin: 30px 0;
            text-align: center;
        }

        .system-architecture h2 {
            margin: 0 0 20px 0;
            font-size: 32px;
        }

        .system-architecture p {
            font-size: 18px;
            opacity: 0.9;
            margin: 0;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="nav-brand">
            <h2>ğŸ›ï¸ ASA Data Server</h2>
            <p style="font-size: 12px; margin: 0; color: #ddd;">Association for Social Advancement</p>
        </div>
        <ul class="nav-menu">
            <li><a href="dashboard-asa.html" class="active">ğŸ“Š Dashboard</a></li>
            <li><a href="companies-functional.html">ğŸ¢ Companies</a></li>
            <li><a href="investors-functional.html">ğŸ‘¤ Investors</a></li>
            <li><a href="stocks-functional.html">ğŸ“ˆ Stocks</a></li>
            <li><a href="transactions-functional.html">ğŸ’° Transactions</a></li>
            <li><a href="audit-reports-functional.html">ğŸ“‹ Audit Reports</a></li>
            <li><a href="institutions-functional.html">ğŸ›ï¸ Institutions</a></li>
            <li><a href="trades-functional.html">ğŸ”„ Trades</a></li>
            <li><a href="users-functional.html">ğŸ‘¥ Users</a></li>
            <li><a href="fraud-alerts-functional.html">âš ï¸ Fraud Alerts</a></li>
            <li><a href="price-history-functional.html">ğŸ“Š Price History</a></li>
            <li><a href="predictions-functional.html">ğŸ”® Predictions</a></li>
            <li><a href="#" class="logout" onclick="handleLogout(); return false;">ğŸšª Logout</a></li>
        </ul>
    </nav>

    <div class="main-content">
        <div class="system-architecture">
            <h2>ğŸŒ ASA Data Server</h2>
            <p>Central hub for stock market data management, connecting investors, managers, auditors, and market data
                providers</p>
        </div>

        <div class="quick-stats">
            <div class="stat-card">
                <div class="stat-label">Active Investors</div>
                <div class="stat-number" id="active-investors">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Listed Companies</div>
                <div class="stat-number" id="listed-companies">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Active Stocks</div>
                <div class="stat-number" id="active-stocks">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Daily Trades</div>
                <div class="stat-number" id="daily-trades">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Audit Reports</div>
                <div class="stat-number" id="audit-reports">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Institutions</div>
                <div class="stat-number" id="institutions">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Fraud Alerts</div>
                <div class="stat-number" id="fraud-alerts">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">AI Predictions</div>
                <div class="stat-number" id="predictions">0</div>
            </div>
        </div>
    </div>

    <script src="js/logout.js"></script>
    <script>
        // Function to get data from localStorage and update dashboard
        function updateDashboardStats() {
            // Get data from localStorage
            const investors = JSON.parse(localStorage.getItem('investors') || '[]');
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const stocks = JSON.parse(localStorage.getItem('stocks') || '[]');
            const trades = JSON.parse(localStorage.getItem('trades') || '[]');
            const auditReports = JSON.parse(localStorage.getItem('audit_reports') || '[]');
            const institutions = JSON.parse(localStorage.getItem('institutions') || '[]');
            const fraudAlerts = JSON.parse(localStorage.getItem('fraud_alerts') || '[]');
            const predictions = JSON.parse(localStorage.getItem('predictions') || '[]');

            // Update counts
            document.getElementById('active-investors').textContent = investors.length.toLocaleString();
            document.getElementById('listed-companies').textContent = companies.length.toLocaleString();
            document.getElementById('active-stocks').textContent = stocks.filter(s => s.status === 'Active').length.toLocaleString();
            document.getElementById('institutions').textContent = institutions.length.toLocaleString();
            document.getElementById('fraud-alerts').textContent = fraudAlerts.filter(f => f.status === 'Active').length.toLocaleString();
            document.getElementById('predictions').textContent = predictions.filter(p => p.status === 'Active').length.toLocaleString();

            // Filter today's trades
            const today = new Date().toISOString().split('T')[0];
            const todayTrades = trades.filter(trade => {
                if (trade.trade_date || trade.date) {
                    const tradeDate = (trade.trade_date || trade.date).split(' ')[0];
                    return tradeDate === today;
                }
                return false;
            });
            document.getElementById('daily-trades').textContent = todayTrades.length.toLocaleString();
            document.getElementById('audit-reports').textContent = auditReports.length.toLocaleString();
        }

        // Update stats when page loads
        document.addEventListener('DOMContentLoaded', updateDashboardStats);

        // Update stats every 5 seconds to reflect changes
        setInterval(updateDashboardStats, 5000);
    </script>
</body>

</html>